---
import medicooral from '../assets/medicooral.png';
import merjem from '../assets/merjemdurakovic.png';
import passwordGenerator from '../assets/passwordgenerator.png';
import beerTasting from '../assets/beertasting.png';
import placeholder from '../assets/placeholder.png';
import { Image } from 'astro:assets';
import { ArrowDown } from 'lucide-astro';

interface Project {
  title: string;
  description: string;
  image?: ImageMetadata;
  technologies: string[];
  liveUrl?: string;
  githubUrl?: string;
  isWebsite?: boolean;
}

const featuredProjects: Project[] = [
  {
    title: "Merjem Durakovic - Artist",
    description: "A portfolio website for a graphic designer featuring a custom-built animated background effect. The site showcases brand identity projects and UI/UX work with a focus on visual aesthetics and smooth transitions.",
    image: merjem,
    technologies: ["Astro", "Tailwind CSS", "TypeScript", "CSS Animation"],
    liveUrl: "https://merjemdurakovic.netlify.app",
    isWebsite: true
  },
  {
    title: "Medicooral-AS",
    description: "A modern dental clinic website built with Astro, featuring multilingual support (BS/EN) and a streamlined contact form. Optimized for performance and SEO, the site showcases a clean, custom design focused on user experience.",
    image: medicooral,
    technologies: ["Astro", "TypeScript", "Tailwind CSS", "i18n"],
    liveUrl: "https://medicooral-as.com",
    isWebsite: true
  },
  {
    title: "BeerTasting App",
    description: "A mobile application for beer enthusiasts to scan, rate, and review beers. Features include EAN barcode scanning, personalized beer cellar, detailed ratings system, and a comprehensive beer database with over 100k users worldwide.",
    image: beerTasting,
    technologies: ["Ionic", "Angular", "TypeScript", "Mobile Development"],
    liveUrl: "https://beertasting.app/en/",
    isWebsite: true
  }
];

const allProjects: Project[] = [
  ...featuredProjects,
  {
    title: "Password Generator",
    description: "A secure password generator with customizable options for length and character types. Features a desktop ui interface and copy-to-clipboard functionality. Fun fact: This was my first programming project, built while learning Python!",
    image: passwordGenerator,
    technologies: ["Python", "TKinter"],
    liveUrl: "https://github.com/Aewass/Python-Password-Generator-w-TKinter-GUI",
    isWebsite: false
  },
  {
    title: "Bosnian CSS Preprocessor",
    description: "A fun project that translates CSS properties into Bosnian language, allowing developers to write CSS using Bosnian terms. Built as an educational tool and homage to the Bosnian language.",
    image: placeholder,
    technologies: ["JavaScript", "CSS", "NPM Package", "PostCSS"],
    liveUrl: "https://www.npmjs.com/package/bosnian-css-preprocessor",
    isWebsite: false
  },
];
---

<section class="max-w-4xl mx-auto px-4 py-20">
  <h2 class="text-3xl font-bold text-start mb-16">Featured Projects</h2>

  <div class="space-y-16" id="projectsGrid">
    {allProjects.map((project, index) => (
      <div class={`project-card ${index >= featuredProjects.length ? 'hidden' : ''}`}>
        <div class="group">
          {project.liveUrl && (
            <a 
              href={project.liveUrl}
              target="_blank"
              rel="noopener noreferrer"
              class={`block ${index >= featuredProjects.length ? 'border-l-2 border-gray-200 dark:border-gray-700 pl-6 hover:border-gray-400 dark:hover:border-gray-500 transition-colors' : ''}`}
              aria-label={`View ${project.title} project`}
            >
              {index < featuredProjects.length && (
                <div class="mb-8 overflow-hidden w-full">
                  {project.isWebsite ? (
                    <Image 
                      src={project.image} 
                      alt={`Screenshot of ${project.title}`}
                      class="w-full h-full object-cover grayscale hover:grayscale-0 dark:opacity-80 dark:hover:opacity-100 transition-all duration-700"
                      width={1280}
                      height={720}
                    />
                  ) : (
                    <div class="relative w-full h-full">
                      <div class="absolute inset-0 bg-gradient-to-br from-gray-50/80 to-white/20 backdrop-blur-md z-0" />
                      {project.image && (
                        <Image 
                          src={project.image} 
                          alt={`Screenshot of ${project.title}`}
                          class="absolute inset-0 w-full h-full object-cover blur-2xl opacity-20 scale-110"
                          width={1280}
                          height={720}
                        />
                      )}
                      <div class="relative w-full h-full flex items-center justify-center">
                        <Image 
                          src={project.image} 
                          alt={`Screenshot of ${project.title}`}
                          class="w-auto h-[80%] object-contain group-hover:scale-[1.02] transition-transform duration-300 grayscale hover:grayscale-0"
                          width={1280}
                          height={720}
                        />
                      </div>
                    </div>
                  )}
                </div>
              )}
              
              <div class={`${index >= featuredProjects.length ? 'max-w-none' : 'max-w-2xl'}`}>
                <h3 class="text-2xl font-normal mb-4 group-hover:text-gray-500 transition-colors">{project.title}</h3>
                <p class="text-gray-600 dark:text-gray-300 mb-6 leading-relaxed">{project.description}</p>
                
                <div class="flex flex-wrap gap-x-6 text-sm tracking-wide text-gray-400 dark:text-gray-300">
                  {project.technologies.map(tech => (
                    <span class="uppercase text-[11px]">{tech}</span>
                  ))}
                </div>
              </div>
            </a>
          )}
        </div>
      </div>
    ))}

    {allProjects.length > featuredProjects.length && (
      <a 
        id="seeMore" class="inline-flex items-center gap-2 text-sm tracking-wider text-gray-400 hover:text-gray-900 dark:hover:text-white uppercase transition-colors mt-16"
      >
        View More Projects <ArrowDown class="w-4 h-4" />
      </a>
    )}
  </div>
</section>

<script>
  const seeMoreBtn = document.getElementById('seeMore');
  const hiddenProjects = document.querySelectorAll('.project-card.hidden');

  if (seeMoreBtn) {
    seeMoreBtn.addEventListener('click', () => {
      // Show all hidden projects
      hiddenProjects.forEach(project => {
        project.classList.remove('hidden');
      });
      // Remove the "View More" button
      seeMoreBtn.remove();
    });
  }
</script>

<style>
  @media (hover: none) {
    .group:active .opacity-0 {
      opacity: 1;
    }
    .group:active .translate-y-2 {
      transform: translateY(0);
    }
    .group:active .scale-100 {
      transform: scale(1.02);
    }
  }

  .dark .project-card .bg-gradient-to-br {
    --tw-gradient-from: rgb(17 17 17 / 0.8);
    --tw-gradient-to: rgb(0 0 0 / 0.2);
  }
</style> 